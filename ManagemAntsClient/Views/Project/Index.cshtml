@{
    Layout = "~/Views/Shared/_Navbar.cshtml";
}
@model ManagemAntsClient.Models.ProjectPage


<div>
    <nav class="navbar py-0 bg-blue shadow">
        <a class="navbar-brand text-white">Accueil</a>
        <span class="navbar-text text-white">@Model.Project.name</span>
        <span class="navbar-text text-white">
          <button class="btn btn-danger btn-sm mr-2">Deconnexion</button>
               @Model.LoggedUser.pseudo
        </span>
    </nav>
    <div class="row no-gutters">
        <div class="col-7 shadow bg-lightgray p-2 m-3">
            <div class="row mt-2">
                <div class="col-3 align-self-center">
                    <div class="dropdown">
                        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Filter...
                        </a>

                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <a class="dropdown-item" href="#">A faire</a>
                            <a class="dropdown-item" href="#">En cours</a>
                            <a class="dropdown-item" href="#">Fait</a>
                            <a class="dropdown-item" href="#">Rendu</a>
                        </div>
                    </div>
                </div>
                <div class="col-5 text-center"><h3>Todo List</h3></div>
                <div class="col-4 text-right align-self-center">
                    <button class="btn btn-secondary btn-sm text-sm-center ">Ajouter une tache</button>
                </div>
            </div>
            <div class="p-3">
                @foreach (var task in Model.Tasks)
                {
                    <div class="row bg-dark rounded mb-2 p-2" onclick="openTaskInfos(@task.Id)">
                        <div class="col-auto mr-auto text-white align-self-center pl-1">
                            @task.Name
                        </div>
                        <div class="col-auto pr-1">
                            <button class="btn btn-danger btn-sm">Retour</button>
                            <button class="btn btn-secondary btn-sm ml-2 mr-2" disabled>@task.getState()</button>
                            <button class="btn btn-success btn-sm">Suivant</button>
                        </div>
                    </div>
                    <partial name="_taskInfoModal" model="@task"/>
                }
                <div class="row justify-content-center">
                    <button class="btn btn-secondary btn-sm">+</button>
                </div>

            </div>
        </div>
        <div class="col-4 m-3">
            <div class="shadow mb-4"></div>
            <button class="btn btn-secondary btn-lg">Statistiques</button>
        </div>


    </div>
</div>



<script>
    function openTaskInfos(id) {
        $(`#taskInfoModal-${id}`).modal("show");
    }
</script>